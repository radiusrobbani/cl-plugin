!function(i){var t=function(t,e){this.target=t,this._slider=i(".rtcl-slider",t),this._slider_nav=i(".rtcl-slider-nav",t),this._slider_images=i(".rtcl-slider-item",this._slider),this.serrings=rtcl_single_listing_localized_params||{},this.options=Object.assign({},this.serrings.slider_options),void 0===this.options.rtl&&"rtl"===i("html").attr("dir")&&(this.options.rtl=!0),this.slider_enabled=i.isFunction(i.fn.owlCarousel)&&this.serrings.slider_enabled,this.zoom_enabled=i.isFunction(i.fn.zoom)&&this.serrings.zoom_enabled,this.photoswipe_enabled="undefined"!=typeof PhotoSwipe&&this.serrings.photoswipe_enabled,e&&(this.slider_enabled=!1!==e.slider_enabled&&this.slider_enabled,this.zoom_enabled=!1!==e.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==e.photoswipe_enabled&&this.photoswipe_enabled),1===this._slider_images.length&&(this.slider_enabled=!1),this.sliderChangeActive=function(t){this._slider_nav.find(".rtcl-slider-thumb-item.active").removeClass("active"),this._slider_nav.find(".owl-item:eq("+t+") .rtcl-slider-thumb-item").addClass("active"),i(this).index()},this.initOwlCarousel=function(){if(this.slider_enabled){var t=this._slider,e=this._slider_nav,s=this;t.on("initialized.owl.carousel",(function(i){i.relatedTarget._items[i.relatedTarget._current].find("iframe").length&&i.target.classList.add("active-video-slider")})).owlCarousel({items:1,dots:!1,autoHeight:!0,rtl:!!this.options.rtl,nav:!0,navText:['<i class="rtcl-icon-angle-left rtcl-icon-zoom-in"></i>','<i class="rtcl-icon-angle-right"></i>']}).on("changed.owl.carousel",(function(t){e.trigger("to.owl.carousel",[t.item.index,300,!0]),s.sliderChangeActive(t.item.index),s.initZoomForTarget(t.item.index),t.relatedTarget._items.map((function(e,s){if(s!==t.relatedTarget._current){var r=e.find("iframe");r.length&&r.each((function(){var t=i(this).attr("src");i(this).attr("src",t)}))}})),t.relatedTarget._items[t.relatedTarget._current].find("iframe").length?t.target.classList.add("active-video-slider"):t.target.classList.remove("active-video-slider")})),e.find(".rtcl-slider-thumb-item:first-child").addClass("active"),e.owlCarousel({responsive:{0:{items:4},200:{items:4},400:{items:4},600:{items:5}},margin:5,rtl:!!this.options.rtl,nav:!0,navText:['<i class="rtcl-icon-angle-left"></i>','<i class="rtcl-icon-angle-right"></i>'],onInitialized:function(){var t=i(".rtcl-slider-thumb-item .owl-stage");t.css("width",t.width()+1)},onResized:function(){var t=i(".rtcl-slider-thumb-item .owl-stage");t.css("width",t.width()+1)}}).on("click",".owl-item",(function(){t.trigger("to.owl.carousel",[i(this).index(),300,!0]),s.sliderChangeActive(i(this).index())})).on("changed.owl.carousel",(function(i){t.trigger("to.owl.carousel",[i.item.index,300,!0]),s.sliderChangeActive(i.item.index)}))}},this.imagesLoaded=function(){var t=this;if(i.fn.imagesLoaded.done)return this.target.trigger("rtcl_gallery_loading",this),void this.target.trigger("rtcl_gallery_loaded",this);this.target.imagesLoaded().progress((function(i,e){t.target.trigger("rtcl_gallery_loading",[t])})).done((function(i){t.target.trigger("rtcl_gallery_loaded",[t])}))},this.initZoom=function(){this.zoom_enabled&&this.initZoomForTarget(0)},this.initZoomForTarget=function(t){if(this.zoom_enabled){var e=this._slider.width(),s=!1,r=this._slider_images.eq(t);if(i(r).each((function(t,r){var n=i(r).find("img");if(parseInt(n.data("large_image_width"))>e)return s=!0,!1})),s){var n=i.extend({touch:!1},this.serrings.zoom_options);"ontouchstart"in document.documentElement&&(n.on="click"),r.trigger("zoom.destroy"),r.zoom(n),this.target.on("rtcl_gallery_init_zoom",this.initZoom)}}},this.initPhotoswipe=function(){this.photoswipe_enabled&&(this._slider.prepend('<a href="#" class="rtcl-listing-gallery__trigger"><i class="rtcl-icon-search"></i></i> </a>'),this._slider.on("click",".rtcl-listing-gallery__trigger",this.openPhotoswipe.bind(this)))},this.getGalleryItems=function(){var t=this._slider_images,e=[];return t.length>0&&t.each((function(t,s){var r=i(s).find("img");if(r.length){var n={src:r.attr("data-large_image"),w:r.attr("data-large_image_width"),h:r.attr("data-large_image_height"),title:r.attr("data-caption")?r.attr("data-caption"):r.attr("title")};e.push(n)}})),e},this.openPhotoswipe=function(t){t.preventDefault();var e,s=i(".pswp")[0],r=this.getGalleryItems(),n=i(t.target);e=n.is(".rtcl-listing-gallery__trigger")||n.is(".rtcl-listing-gallery__trigger img")?this._slider.find(".owl-item.active"):n.closest(".rtcl-slider-item");var l=i.extend({index:i(e).index()},this.serrings.photoswipe_options);new PhotoSwipe(s,PhotoSwipeUI_Default,r,l).init()},this.start=function(){var i=this;this.target.on("rtcl_gallery_loaded",this.init.bind(this)),setTimeout((function(){i.imagesLoaded()}),1)},this.init=function(){this.initOwlCarousel(),this.initZoom(),this.initPhotoswipe()},this.start()};i.fn.rtcl_listing_gallery=function(i){return new t(this,i),this},i(".rtcl-slider-wrapper").each((function(){i(this).rtcl_listing_gallery()}))}(jQuery);
