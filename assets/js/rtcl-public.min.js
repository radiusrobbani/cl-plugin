!function(t){"use strict";function e(t){var e,r,a=decodeURIComponent(window.location.search.substring(1)).split("&");for(r=0;r<a.length;r++)if((e=a[r].split("="))[0]===t)return void 0===e[1]||e[1]}t("body").on("init","#rating",(function(){t("#rating").hide().before('<p class="stars"><span><a class="star-1" href="#">1</a><a class="star-2" href="#">2</a><a class="star-3" href="#">3</a><a class="star-4" href="#">4</a><a class="star-5" href="#">5</a></span></p>')})).on("click","#respond p.stars a",(function(){var e=t(this),r=t(this).closest("#respond").find("#rating"),a=r.parent(".form-group"),n=t(this).closest(".stars");return r.val(e.text()),e.siblings("a").removeClass("active"),e.addClass("active"),n.addClass("selected"),a.removeClass("has-danger"),a.find(".with-errors").remove(),!1})).on("change",".rtcl-ordering select.orderby",(function(){t(this).closest("form").submit()})).on("click",".rtcl-animate",(function(e){e.preventDefault();var r=t(t(this).attr("href")).offset();t("html,body").stop().animate({scrollTop:r.top-120},500)})).on("input",".rtcl-password",(function(){var e=t(this),r=e.val(),a=e.parent(),n=a.find(".rtcl-pass-strength-result");if(n.length||(n=t('<div class="rtcl-pass-strength-result" />'),a.append(n)),n.removeClass("short bad good strong empty"),!r||""===r.trim()||r.trim().length<rtcl_validator.pw_min_length)n.addClass("empty").html("&nbsp;");else switch(rtclCheckPasswordStrength(r)){case-1:n.addClass("bad").html(rtcl_validator.pwsL10n.unknown);break;case 1:case 2:n.addClass("bad").html(rtcl_validator.pwsL10n.bad);break;case 3:case 4:n.addClass("good").html(rtcl_validator.pwsL10n.good);break;case 5:case 6:n.addClass("strong").html(rtcl_validator.pwsL10n.strong);break;default:n.addClass("short").html(rtcl_validator.pwsL10n.short)}})),t("#rating").trigger("init"),t(document).on("click","#rtcl-resend-verify-link",(function(e){if(e.preventDefault(),confirm(rtcl.re_send_confirm_text)){var r=t(this).data("login"),a=t(this).parent();t.ajax({url:rtcl.ajaxurl,data:{action:"rtcl_resend_verify",user_login:r,__rtcl_wpnonce:rtcl.__rtcl_wpnonce},type:"POST",dataType:"JSON",beforeSend:function(){a.rtclBlock()},success:function(t){a.rtclUnblock(),alert(t.data.message)},error:function(t){a.rtclUnblock(),alert("Server Error!!!")}})}return!1})),window.rtcl_make_checkout_request=function(e,r){var a=t(e),n=t("button[type=submit]",a),s=t("<div class='alert rtcl-response'></div>"),c=a.serialize();t.ajax({url:rtcl.ajaxurl,data:c,type:"POST",dataType:"JSON",beforeSend:function(){n.prop("disabled",!0),a.find(".alert.rtcl-response").remove(),a.rtclBlock()},success:function(t){n.prop("disabled",!1),a.rtclUnblock();var e="";t.success?(t.success_message.length&&t.success_message.map((function(t){e+="<p>"+t+"</p>"})),e&&s.removeClass("alert-danger").addClass("alert-success").html(e).appendTo(a)):(t.error_message.length&&t.error_message.map((function(t){e+="<p>"+t+"</p>"})),e&&s.removeClass("alert-success").addClass("alert-danger").html(e).appendTo(a)),"function"==typeof r?r(t):setTimeout((function(){t.redirect_url&&(window.location=t.redirect_url)}),600)},error:function(t){n.prop("disabled",!1),a.rtclUnblock(),"function"==typeof r&&r(t)}})},window.rtcl_on_recaptcha_load=function(){""!=rtcl.recaptcha_site_key&&(t("#rtcl-registration-g-recaptcha").length?-1!==t.inArray("registration",rtcl.recaptchas)&&(rtcl.recaptcha_registration=1,rtcl.recaptcha_responce.registration=grecaptcha.render("rtcl-registration-g-recaptcha",{sitekey:rtcl.recaptcha_site_key}),t("#rtcl-registration-g-recaptcha").addClass("mb-2")):rtcl.recaptcha_registration=0,t("#rtcl-listing-g-recaptcha").length?-1!==t.inArray("listing",rtcl.recaptchas)&&(rtcl.recaptcha_listing=1,rtcl.recaptcha_responce.listing=grecaptcha.render("rtcl-listing-g-recaptcha",{sitekey:rtcl.recaptcha_site_key}),grecaptcha.reset()):rtcl.recaptcha_listing=0,t("#rtcl-contact-g-recaptcha").length?-1!==t.inArray("contact",rtcl.recaptchas)&&(rtcl.recaptcha_responce.contact=grecaptcha.render("rtcl-contact-g-recaptcha",{sitekey:rtcl.recaptcha_site_key}),rtcl.recaptcha_contact=1):rtcl.recaptcha_contact=0,t("#rtcl-report-abuse-g-recaptcha").length?-1!==t.inArray("report_abuse",rtcl.recaptchas)&&(rtcl.recaptcha_responce.report_abuse=grecaptcha.render("rtcl-report-abuse-g-recaptcha",{sitekey:rtcl.recaptcha_site_key}),rtcl.recaptcha_report_abuse=1):rtcl.recaptcha_report_abuse=0,t(document).trigger("rtcl_recaptcha_loaded"))},t((function(){t(".rtcl-delete-listing").on("click",(function(e){if(e.preventDefault(),confirm(rtcl.confirm_text)){var r=t(this),a=r.parents(".rtcl-listing-item"),n={action:"rtcl_delete_listing",post_id:parseInt(r.attr("data-id"),10),__rtcl_wpnonce:rtcl.__rtcl_wpnonce};n.post_id&&t.ajax({url:rtcl.ajaxurl,data:n,type:"POST",beforeSend:function(){a.rtclBlock()},success:function(e){a.rtclUnblock(),e.success&&a.animate({height:0,opacity:0},"slow",(function(){t(this).remove()}))},error:function(){a.rtclUnblock()}})}return!1})),t(".rtcl-delete-favourite-listing").on("click",(function(e){if(e.preventDefault(),confirm(rtcl.confirm_text)){var r=this,a=t(r),n={action:"rtcl_public_add_remove_favorites",post_id:parseInt(a.attr("data-id"),10),__rtcl_wpnonce:rtcl.__rtcl_wpnonce};n.post_id&&t.ajax({url:rtcl.ajaxurl,data:n,type:"POST",beforeSend:function(){t("<span class='rtcl-icon-spinner animate-spin'></span>").insertAfter(a)},success:function(e){e.target=r,a.next(".rtcl-icon-spinner").remove(),e.success&&a.parents(".rtcl-listing-item").animate({height:0,opacity:0},"slow",(function(){t(this).remove()})),t(document).trigger("rtcl.favorite",e)},error:function(e){t(document).trigger("rtcl.favorite.error",{action:"remove",post_id:n.post_id,target:r}),a.next(".rtcl-icon-spinner").remove()}})}return!1})),t("#rtcl-checkout-form").on("click",'input[name="pricing_id"]',(function(e){0==t(this).val()?t("#rtcl-payment-methods, #rtcl-checkout-submit-btn").slideUp(250):t("#rtcl-payment-methods, #rtcl-checkout-submit-btn").slideDown(250)})).on("change",'input[name="payment_method"]',(function(e){var r=t("div.payment_box.payment_method_"+t(this).val());t(this).is(":checked")&&!r.is(":visible")&&(t("#rtcl-checkout-form div.payment_box").filter(":visible").slideUp(250),t(this).is(":checked")&&r.slideDown(250))})),t(".rtcl-media-upload-pp .rtcl-media-action").on("click","span.add",(function(){var e=t(this),r=t("<input type='file' style='position:absolute;left:-9999px' />");t("body").append(r),navigator.userAgent.match(/MSIE ([0-9]+)\./)?r.trigger("change"):r.trigger("click"),r.on("change",(function(){var r=t(this),a=e.parents(".rtcl-media-upload-pp"),n=t(".rtcl-media-item",a),s=new FormData,c=r[0].files[0],l=rtcl.image_allowed_type.map((function(t){return"image/"+t})),i=parseInt(rtcl.max_image_size);-1!==t.inArray(c.type,l)?c.size<=i?(s.append("pp",c),s.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),s.append("action","rtcl_ajax_user_profile_picture_upload"),t.ajax({url:rtcl.ajaxurl,data:s,cache:!1,contentType:!1,processData:!1,type:"POST",beforeSend:function(){a.rtclBlock()},success:function(t){a.rtclUnblock(),t.error||(a.removeClass("no-media").addClass("has-media").parents(".rtcl-profile-picture-wrap").find(".rtcl-gravatar-wrap").hide(),n.html("<img class='rtcl-thumbnail' src='"+t.data.src+"'/>"))},error:function(t,e,r){a.rtclUnblock(),console.log("error")}})):alert(rtcl.error_image_size):alert(rtcl.error_image_extension)}))})).on("click","span.remove",(function(){var e=t(this).parents(".rtcl-media-upload-pp"),r=t(".rtcl-media-item",e);confirm(rtcl.confirm_text)&&t.ajax({url:rtcl.ajaxurl,data:{action:"rtcl_ajax_user_profile_picture_delete",__rtcl_wpnonce:rtcl.__rtcl_wpnonce},type:"POST",beforeSend:function(){e.rtclBlock()},success:function(t){e.rtclUnblock(),t.error||(e.removeClass("has-media").addClass("no-media").parents(".rtcl-profile-picture-wrap").find(".rtcl-gravatar-wrap").show(),r.html(""))},error:function(t,r,a){e.rtclUnblock(),console.log("error")}})})),t("#rtcl-change-password").on("change",(function(){t(this).is(":checked")?t(".rtcl-password-fields").show().find('input[type="password"]').attr("disabled",!1):t(".rtcl-password-fields").hide().find('input[type="password"]').attr("disabled","disabled")})).trigger("change"),t("#rtcl-report-abuse-modal").on("hidden.bs.modal",(function(e){t("#rtcl-report-abuse-message").val(""),t("#rtcl-report-abuse-message-display").html(""),t(this).find(".modal-dialog").removeClass("modal-vertical-centered")})).on("shown.bs.modal",(function(){t(this).find(".modal-dialog").addClass("modal-vertical-centered")})),t(".rtcl-require-login").on("click",(function(t){t.preventDefault(),alert(rtcl.user_login_alert_message)})),t(".rtcl-do-email").on("click","a",(function(e){e.preventDefault();var r=t(this).parents(".rtcl-do-email");return t("#rtcl-contact-form",r).slideToggle("slow"),!1})),t(document).on("click","a.rtcl-favourites",(function(e){e.preventDefault();var r=this,a=t(r),n={action:"rtcl_public_add_remove_favorites",post_id:parseInt(a.attr("data-id"),10),__rtcl_wpnonce:rtcl.__rtcl_wpnonce};n.post_id&&t.ajax({url:rtcl.ajaxurl,data:n,type:"POST",beforeSend:function(){t("<span class='rtcl-icon-spinner animate-spin'></span>").insertAfter(a)},success:function(e){e.target=r,a.next(".rtcl-icon-spinner").remove(),e.success&&a.replaceWith(e.html),t(document).trigger("rtcl.favorite",e)},error:function(e){t(document).trigger("rtcl.favorite.error",{action:"remove",post_id:n.post_id,target:r}),a.next(".rtcl-icon-spinner").remove()}})}));var r=function(e,r){this.$target=e,this.slider_enabled=t.isFunction(t.fn.owlCarousel),this.options=this.$target.data("options")||{},this.initSlider=function(){this.slider_enabled&&this.$target.owlCarousel({responsive:{0:{items:1},320:{items:this.options.mobile_items?parseInt(this.options.mobile_items,10):1},768:{items:this.options.tab_items?parseInt(this.options.tab_items,10):3},992:{items:this.options.items?parseInt(this.options.items,10):4}},margin:this.options.margin?parseInt(this.options.margin,10):0,rtl:!!parseInt(rtcl.is_rtl),nav:!!this.options.nav,dots:!!this.options.dots,autoplay:!!this.options.autoplay,smartSpeed:this.options.smart_speed?parseInt(this.options.smart_speed,10):250,autoplaySpeed:!!this.options.autoplay_speed&&this.options.autoplay_speed,navSpeed:!!this.options.nav_speed&&this.options.nav_speed,dotsSpeed:!!this.options.dots_speed&&this.options.dots_speed,navText:['<i class="rtcl-icon-angle-left"></i>','<i class="rtcl-icon-angle-right"></i>']})},this.imagesLoaded=function(){var e=this;if(!t.isFunction(t.fn.imagesLoaded)||t.fn.imagesLoaded.done)return this.$target.trigger("rtcl_slider_loading",this),void this.$target.trigger("rtcl_slider_loaded",this);this.$target.imagesLoaded().progress((function(t,r){e.$target.trigger("rtcl_slider_loading",[e])})).done((function(t){e.$target.trigger("rtcl_slider_loaded",[e])}))},this.start=function(){var t=this;this.$target.on("rtcl_slider_loaded",this.init.bind(this)),setTimeout((function(){t.imagesLoaded()}),1)},this.init=function(){this.initSlider()},this.start()};t.fn.rtcl_slider=function(t){return new r(this,t),this},t(".rtcl-carousel-slider").each((function(){t(this).addClass("owl-carousel").rtcl_slider()})),t(".rtcl-terms").on("change","select",(function(e){e.preventDefault();var r=t(this),a=r.data("taxonomy"),n=r.data("parent"),s=r.val(),c=r.find(":selected").attr("data-slug")||"",l=r.attr("class"),i=r.closest(".rtcl-terms").find("input.rtcl-term-hidden"),o=r.closest(".rtcl-terms").find("input.rtcl-term-hidden-value");if(i.val(s).attr("data-slug",c),o.val(c),r.parent().find("div:first").remove(),n!==s){r.parent().append('<div class="rtcl-spinner"><span class="rtcl-icon-spinner animate-spin"></span></div>');var d={action:"rtcl_child_dropdown_terms",taxonomy:a,parent:s,class:l};t.post(rtcl.ajaxurl,d,(function(t){r.parent().find("div:first").remove(),r.parent().append(t)}))}}));var a={active:null,target:null,loc:{items:[],selected:null,parents:[],text:rtcl.location_text},cat:{items:[],selected:null,parents:[],text:rtcl.category_text}};t(".rtcl-widget-search-form .rtcl-search-input-category").on("click",(function(){a.active="cat",a.target=t(this);var e=new RtclModal({footer:!1,wrapClass:"no-heading"});a.cat.items.length?(e.addModal(),e.content(s())):t.ajax({url:rtcl.ajaxurl,type:"POST",data:{action:"rtcl_get_all_cat_list_for_modal"},beforeSend:function(){e.addModal().addLoading()},success:function(t){e.removeLoading(),t.success&&(a.cat.items=t.categories,a.cat.selected=null,a.cat.parent=null,e.content(s()))},error:function(t){e.removeLoading(),e.content(rtcl_validator.server_error)}})})),t(".rtcl-widget-search-form .rtcl-search-input-location").on("click",(function(){a.active="loc",a.target=t(this);var e=new RtclModal({footer:!1,wrapClass:"no-heading"});a.loc.items.length?(e.addModal(),e.content(s())):t.ajax({url:rtcl.ajaxurl,type:"POST",data:{action:"rtcl_get_all_location_list_for_modal"},beforeSend:function(){e.addModal().addLoading()},success:function(t){e.removeLoading(),t.success?(a.loc.items=t.locations,a.loc.selected=null,a.loc.parent=null,e.content(s())):e.content(rtcl_validator.server_error)},error:function(t){e.removeLoading(),e.content(rtcl_validator.server_error)}})}));var n=t(".rtcl-widget-search-form .rtcl-autocomplete");function s(){var e=a.active,r=c(a[e].items),n=t('<div class="rtcl-ui-select-list-wrap"><h4>'+a[e].text+'</h4><div class="rtcl-select-action"></div><div class="rtcl-ui-select-list"></div></div>');return n.find(".rtcl-ui-select-list").append(r),n}function c(e){var r=t("<ul />");return e.forEach((function(e){var a=t('<a href="javascript:;" />'),n=t("<li />");e.hasOwnProperty("sub")&&n.addClass("has-sub"),e.hasOwnProperty("icon")&&a.html(e.icon),a.append(e.name),a.attr("data-item",JSON.stringify(l(e))),n.append(a),r.append(n)})),r}function l(t){var e=Object.assign({icon:"",sub:""},t);return delete e.icon,delete e.sub,e}t.fn.autocomplete&&n.length&&(n.autocomplete({minChars:2,search:function(e,r){t(e.target).parent().find(".rtcl-icon-spinner").length||t("<span class='rtcl-icon-spinner animate-spin'></span>").insertAfter(e.target)},response:function(e,r){t(e.target).parent().find(".rtcl-icon-spinner").remove()},source:function(e,r){e.location_slug=rtcl.rtcl_location||"",e.category_slug=rtcl.rtcl_category||"",e.type=t(this.element).data("type")||"listing",e.action="rtcl_inline_search_autocomplete",t.ajax({dataType:"json",type:"POST",url:rtcl.ajaxurl,data:e,success:r})},select:function(e,r){t(e.target).next("input").val(r.item.target)}}).data("ui-autocomplete")._renderItem=function(e,r){return t("<li />").data("item.autocomplete",r).append(r.label).appendTo(e)}),t(".rtcl-ajax-load").each((function(){var e=t(this),r=e.data("settings")||{};r.action="rtcl_ajax_taxonomy_filter_get_sub_level_html",r.__rtcl_wpnonce=rtcl.__rtcl_wpnonce,t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:r,beforeSend:function(){e.rtclBlock()},success:function(t){e.html(t.data).rtclUnblock()},complete:function(){e.rtclUnblock()},error:function(t,r,a){if(e.rtclUnblock(),500===r)console.error("Error while adding comment");else if("timeout"===r)console.error("Error: Server doesn't respond.");else{var n=t.responseText.split("<p>")[1].split("</p>");console.error(n[0])}}})})),t(document).on("click",".rtcl-ui-select-list li.has-sub a",(function(e){e.preventDefault();var r,n=a.active,s=a[n].items,i=t(this),o=i.data("item"),d=i.parents(".rtcl-ui-select-list-wrap"),p=t(".rtcl-ui-select-list",d),u=t(".rtcl-select-action",d),m=t("h4",d),f=i.parents("ul"),h=parseInt(o.id,10);if(a[n].selected?(r=a[n].selected.sub.find((function(t){return t.id===h})),a[n].parent=a[n].selected.id):r=s.find((function(t){return t.id===h})),a[n].selected=r,r.parent&&a[n].parents.push(r.parent),r.hasOwnProperty("sub")&&r.sub.length){f.remove(),p.html(c(r.sub));var g=t('<a href="javascript:;" />');if(g.append(r.name),g.attr("data-item",JSON.stringify(l(r))),m.find("span").length)m.find("span").html(g);else{var _=t('<span class="rtcl-icon-angle-right rtcl-selected-term-item" />').append(g);m.append(_)}u.html("<div class='go-back'>"+rtcl.go_back+"</div>")}})),t(document).on("click",".rtcl-select-action .go-back",(function(e){e.preventDefault();var r,n,s=a.active,i=t(this).parents(".rtcl-ui-select-list-wrap"),o=t(".rtcl-ui-select-list",i),d=t("h4",i),p=t(".rtcl-select-action",i),u=0;if(a[s].parents.length?(r=(n=function(t,e){function r(t){return a.sub&&(a=a.sub),a.find((function(e){return t===e.id}))}var a=e;if(t.length)for(var n=0;n<t.length;n++)a=r(t[n]);return a}(a[s].parents,a[s].items)).sub,a[s].parents.pop(),a[s].selected=n,u=1):(a[s].selected=null,r=a[s].items),o.html(""),o.append(c(r)),u){var m=t('<a href="javascript:;" />');if(m.append(n.name),m.attr("data-item",JSON.stringify(l(n))),d.find("span").length)d.find("span").html(m);else{var f=t('<span class="rtcl-icon-angle-right rtcl-selected-term-item" />').append(m);d.append(f)}}else d.find("span").remove(),p.find(".go-back").remove()})),t(document).on("click",".rtcl-ui-select-list li:not(.has-sub) a, .rtcl-selected-term-item a",(function(e){e.preventDefault();var r=t(this).data("item")||null;return r&&a.target.length&&(a.target.find(".search-input-label").text(r.name),a.target.find("input.rtcl-term-field").val(r.slug),t("body > .rtcl-ui-modal").remove(),t("body").removeClass("rtcl-modal-open"),a.target.closest("form").submit()),!1})),t(document).on("click",".ul-list-group.is-parent > ul > li > a",(function(e){e.preventDefault();var r=t(this),a=r.parent("li"),n=a.parent("ul"),s=t(".col-md-6.sub-wrapper"),c=a.find(".ul-list-group.is-sub").clone()||"",l=r.clone();return l=t("<li />").append(l),c.find("ul").prepend(l),s.addClass("is-active"),s.html(c),n.find("> li").removeClass("is-active"),a.addClass("is-active"),!1})),t(document).on("click",".rtcl-filter-form .filter-list .is-parent.has-sub .arrow",(function(e){e.preventDefault();var r=t(this),a=r.closest("li"),n=r.closest(".ui-accordion-content"),s=n.hasClass("rtcl-ajax-load"),c=n.data("settings")||{},l=a.find("> ul.sub-list");a.hasClass("is-open")?l.slideUp((function(){a.removeClass("is-open")})):s&&c.taxonomy&&a.hasClass("has-sub")&&!a.hasClass("is-loaded")?n.hasClass("rtcl-loading")||(c.parent=a.data("id")||-1,c.action="rtcl_ajax_taxonomy_filter_get_sub_level_html",t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",data:c,beforeSend:function(){n.rtclBlock()},success:function(t){a.append(t.data),n.rtclUnblock(),l.slideDown(),a.addClass("is-open is-loaded")},complete:function(){n.rtclUnblock()},error:function(t,e,r){if(n.rtclUnblock(),500===e)console.error("Error while adding comment");else if("timeout"===e)console.error("Error: Server doesn't respond.");else{var a=t.responseText.split("<p>")[1].split("</p>");console.error(a[0])}}})):(l.slideDown(),a.addClass("is-open"))})),t(".rtcl-filter-form .ui-accordion-item").on("click",".ui-accordion-title",(function(){var e=t(this).parents(".ui-accordion-item"),r=t(".ui-accordion-content",e);e.hasClass("is-open")?r.slideUp((function(){e.removeClass("is-open")})):(r.slideDown(),e.addClass("is-open"))})),t(".rtcl-filter-form").on("click",".filter-submit-trigger",(function(e){var r,a,n=t(this);n.is(":checkbox")||(e.preventDefault(),a=(r=n.siblings("input")).prop("checked"),r.prop("checked",!a)),n.closest("form").submit()})),t(document).on("click","ul.filter-list.is-collapsed li.is-opener, ul.sub-list.is-collapsed li.is-opener, ul.ui-link-tree.is-collapsed li.is-opener",(function(){t(this).parent("ul").removeClass("is-collapsed").addClass("is-open")})),t(".reveal-phone").on("click",(function(e){var r=t(this),a=r.hasClass("rtcl-mobile");if(r.hasClass("revealed")){if(a){var n=r.attr("data-tel");n&&(window.location=n)}}else{e.preventDefault();var s=r.data("options")||{},c=r.find(".numbers"),l="",i="";if(s.safe_phone&&s.phone_hidden){var o=s.safe_phone.replace(rtcl.phone_number_placeholder,s.phone_hidden);l=t('<a href="#" />').attr("href","tel:"+o).text(o),r.attr("data-tel","tel:"+o)}if(s.safe_whatsapp_number&&s.whatsapp_hidden){var d=s.safe_whatsapp_number.replace(rtcl.phone_number_placeholder,s.whatsapp_hidden);i=t('<a class="revealed-whatsapp-number" href="#" />').attr("href","https://wa.me/"+d.replace(/\D/g,"").replace(/^0+/,"")).html('<i class="rtcl-icon rtcl-icon-whatsapp"></i>').append(d)}c.html(l).append(i),r.addClass("revealed")}}));var i=e("option")||"",o=e("gateway")||"";i?t("input[name='pricing_id'][value='"+i+"']").prop("checked",!0):t("input[name='pricing_id'][value='0']").prop("checked",!0),o&&t("label[for='gateway-"+o+"']").trigger("click"),rtclInitDateField()})),t.fn.validate&&(t("#rtcl-lost-password-form, #rtcl-password-reset-form").validate(),t(".rtcl #commentform").validate({submitHandler:function(e){var r,a=t(e),n=a.find("#rating"),s=n.parent(".form-group"),c=n.val(),l=t('<div class="alert" />'),i=t("#comments"),o=t(".comment-list"),d=(t("#cancel-comment-reply-link"),a.find(".btn"));if(n.length>0&&!c)return s.addClass("has-danger"),s.find(".with-errors").remove(),s.append('<div class="with-errors help-block">'+rtcl.i18n_required_rating_text+"</div>"),!1;var p=a.serialize()+"&action=rtcl_ajax_submit_comment";return t.ajax({url:rtcl.ajaxurl,data:p,type:"POST",beforeSend:function(){t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(a.find(".btn")),d.val("Loading...").prop("disabled",!0),a.next(".alert").remove()},success:function(e){a.find(".btn").next(".rtcl-icon-spinner").remove(),d.prop("disabled",!1),l.html(e.message).insertAfter(a),e.error?l.addClass("alert-danger"):(l.addClass("alert-success"),e.comment_id&&t("#li-comment-"+e.comment_id).slideUp(250,(function(){t(this).remove()})),o.length>0?o.append(e.comment_html):(r='<ol class="comment-list">'+e.comment_html+"</ol>",i.append(t(r))),a[0].reset(),a.find("p.stars").removeClass("selected"))},complete:function(){d.val("Submit").prop("disabled",!1)},error:function(t,e,r){if(a.next(".rtcl-icon-spinner").remove(),d.val("Submit").prop("disabled",!1),500===e)alert("Error while adding comment");else if("timeout"===e)alert("Error: Server doesn't respond.");else{var n=t.responseText.split("<p>")[1].split("</p>");alert(n[0])}}}),!1}}),t("#rtcl-checkout-form").validate({submitHandler:function(e){return t(document.body).trigger("rtcl_before_checkout_request",[e]),rtcl_make_checkout_request(e),!1}}),t("form#rtcl-login-form,form.rtcl-login-form").validate({submitHandler:function(e){var r=t(e);if(!r.hasClass("rtcl-ajax-login"))return!0;var a=new FormData(e),n=a.get("username").trim(),s=a.get("password");a.delete("username"),a.delete("password"),a.set("username",rtclCipher(rtcl.__rtcl_wpnonce)(n)),a.set("password",rtclCipher(rtcl.__rtcl_wpnonce)(s)),a.append("action","rtcl_login_request"),a.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",cache:!1,processData:!1,contentType:!1,data:a,beforeSend:function(){r.find(".rtcl-error").remove(),r.rtclBlock()},success:function(t){t.success?(toastr.success(t.data.message),r.append('<div class="rtcl-error alert alert-success" role="alert"><p>'+t.data.message+"</p></div>"),r[0].reset(),window.location.reload(!0)):(r.rtclUnblock(),toastr.error(t.data),r.append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+t.data+"</p></div>"))},error:function(){r.rtclUnblock().append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+rtcl_validator.messages.server_error+"</p></div>"),toastr.error(rtcl_validator.messages.server_error)}})}}),t("form#rtcl-register-form").validate({submitHandler:function(e){if(rtcl.recaptcha_registration>0&&0===grecaptcha.getResponse(rtcl.recaptcha_responce.registration).length)return t("#rtcl-registration-g-recaptcha-message").addClass("text-danger").html(rtcl.recaptcha_invalid_message),grecaptcha.reset(rtcl.recaptcha_responce.registration),!1;var r=t(e);if(!r.hasClass("rtcl-ajax-registration"))return!0;var a=new FormData(e);a.append("action","rtcl_registration_request"),a.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,type:"POST",dataType:"json",cache:!1,processData:!1,contentType:!1,data:a,beforeSend:function(){r.find(".rtcl-error").remove(),r.rtclBlock()},success:function(t){r.rtclUnblock(),t.success?(r.append('<div class="rtcl-error alert alert-success" role="alert"><p>'+t.data.message+"</p></div>"),r[0].reset(),t.data.redirect_url&&t.data.redirect_utl!==window.location.href&&(window.location=t.data.redirect_url+"?t="+(new Date).getTime())):r.append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+t.data+"</p></div>")},error:function(){r.rtclUnblock().append('<div class="rtcl-error alert alert-danger" role="alert"><p>'+rtcl_validator.messages.server_error+"</p></div>")}})}}),t("#rtcl-report-abuse-form").validate({submitHandler:function(e){if(rtcl.recaptcha_report_abuse>0){var r=grecaptcha.getResponse(rtcl.recaptcha_responce.report_abuse);if(0===r.length)return t("#rtcl-report-abuse-message-display").removeClass("text-success").addClass("text-danger").html(rtcl.recaptcha_invalid_message),grecaptcha.reset(rtcl.recaptcha_responce.report_abuse),!1}var a={action:"rtcl_public_report_abuse",post_id:rtcl.post_id||0,message:t("#rtcl-report-abuse-message").val(),"g-recaptcha-response":r},n=t(e).find(".btn.btn-primary");t.ajax({url:rtcl.ajaxurl,data:a,type:"POST",beforeSend:function(){t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(n)},success:function(r){n.next(".rtcl-icon-spinner").remove(),r.error?t("#rtcl-report-abuse-message-display").removeClass("text-success").addClass("text-danger").html(r.message):(t(e)[0].reset(),t("#rtcl-report-abuse-message-display").removeClass("text-danger").addClass("text-success").html(r.message),setTimeout((function(){t("#rtcl-report-abuse-modal").modal("hide")}),1500)),rtcl.recaptcha_contact>0&&grecaptcha.reset(rtcl.recaptcha_responce.report_abuse)},error:function(e){t("#rtcl-report-abuse-message-display").removeClass("text-success").addClass("text-danger").html(e),n.next(".rtcl-icon-spinner").remove()}})}}),t("#rtcl-contact-form").validate({submitHandler:function(e){var r=t(e);if(rtcl.recaptcha_contact>0){var a=grecaptcha.getResponse(rtcl.recaptcha_responce.contact);if(0==a.length)return t("#rtcl-contact-message-display").addClass("text-danger").html(rtcl.recaptcha_invalid_message),grecaptcha.reset(rtcl.recaptcha_responce.contact),!1}var n={action:"rtcl_public_send_contact_email",post_id:rtcl.post_id||0,name:t("#rtcl-contact-name").val(),email:t("#rtcl-contact-email").val(),message:t("#rtcl-contact-message").val(),"g-recaptcha-response":a};t.ajax({url:rtcl.ajaxurl,data:n,type:"POST",beforeSend:function(){t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(r.find(".btn"))},success:function(e){r.find(".btn").next(".rtcl-icon-spinner").remove(),e.error?t("#rtcl-contact-message-display").removeClass("text-success").addClass("text-danger").html(e.message):(r[0].reset(),t("#rtcl-contact-message-display").removeClass("text-danger").addClass("text-success").html(e.message),0!==r.parent().data("hide")&&setTimeout((function(){r.slideUp()}),800)),rtcl.recaptcha_contact>0&&grecaptcha.reset(rtcl.recaptcha_responce.contact)},error:function(e){t("#rtcl-contact-message-display").removeClass("text-success").addClass("text-danger").html(e),r.find(".btn").next(".rtcl-icon-spinner").remove()}})}}),t("#rtcl-user-account").validate({submitHandler:function(e){var r=t(e),a=r.find("input[type=submit]"),n=r.find(".rtcl-response"),s=t("<div class='alert'></div>"),c=new FormData(e);c.append("action","rtcl_update_user_account"),c.append("__rtcl_wpnonce",rtcl.__rtcl_wpnonce),t.ajax({url:rtcl.ajaxurl,data:c,dataType:"json",cache:!1,processData:!1,contentType:!1,type:"POST",beforeSend:function(){r.addClass("rtcl-loading"),a.prop("disabled",!0),n.html(""),t('<span class="rtcl-icon-spinner animate-spin"></span>').insertAfter(a)},success:function(t){a.prop("disabled",!1).next(".rtcl-icon-spinner").remove(),r.removeClass("rtcl-loading"),t.error?s.removeClass("alert-success").addClass("alert-danger").html(t.message).appendTo(n):(r.find("input[name=pass1]").val(""),r.find("input[name=pass2]").val(""),s.removeClass("alert-danger").addClass("alert-success").html(t.message).appendTo(n),setTimeout((function(){n.html("")}),1e3))},error:function(t){s.removeClass("alert-success").addClass("alert-danger").html(t.responseText).appendTo(n),a.prop("disabled",!1).next(".rtcl-icon-spinner").remove(),r.removeClass("rtcl-loading")}})}})),window.rtclInitDateField=function(){t.fn.daterangepicker&&t(".rtcl-date").each((function(){var e=t(this),r=e.data("options")||{};t(this).daterangepicker(r),!1===r.autoUpdateInput&&(e.on("apply.daterangepicker",(function(e,r){r.singleDatePicker?t(this).val(r.startDate.format(r.locale.format)):t(this).val(r.startDate.format(r.locale.format)+r.locale.separator+r.endDate.format(r.locale.format))})),e.on("cancel.daterangepicker",(function(e,r){t(this).val("")})))}))},t(window).on("resize load",(function(){t(".rtcl-equal-height").each((function(){var e=t(this).find(".equal-item");if(e.height("auto"),t(window).width()>767){var r=0;e.each((function(){var e=t(this).outerHeight();e>r&&(r=e)})),e.height(r+"px")}else e.height("auto")}))})).on("load",(function(){t(".rtcl-range-slider-input").on("input",(function(){t(this).parent().find("span.rtcl-range-value").text(this.value)}))}))}(jQuery);
